name: deploy_to_firebase_hosting

on:
  push:
    branches:
    - master

jobs:
    deploy:

      runs-on: ubuntu-latest

      strategy:
        matrix:
          node-version: [12.x]

      name: Deploy
      steps:
        - name: Checkout Repo
          uses: actions/checkout@master
        - name: Ready to deploy
          run: |
            npm install -g firebase-tools
            cd functions
            npm install
        - name: Deploy to Firebase
          run: |
            firebase deploy --token $FIREBASE_TOKEN
          env:
            FIREBASE_TOKEN: ${{ secrets.FIREBASE_TOKEN }}